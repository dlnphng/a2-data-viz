<!DOCTYPE html>
<html>

<head>
    <!-- Import Vega & Vega-Lite (does not have to be from CDN) -->
    <script src="https://cdn.jsdelivr.net/npm/vega@5.20.2"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5.1.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.17.0"></script>
    <title>Mining Industry in Australia</title>

    <link rel="stylesheet" type="text/css" href="css/style.css" media="all">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Luxurious+Script&family=Special+Elite&display=swap" rel="stylesheet">
</head>

<body>
    <!-- <h1>An Exploration of Mining Industry in Australia</h1> -->
    <section class="container">
        <!-- Left-aligned text -->
        <div class="left">
          <p>Exploration of <br><span class="colored-text">Mining Industry</span></p>
        </div>
    
        <!-- Center image -->
        <div class="image">
          <img src="coal-mine.png" alt="Mining Image">
        </div>
    
        <!-- Right-aligned text -->
        <div class="right">
          <p><span class="colored-text">Australia</span><br>2013 - 2022</p>
        </div>
    </section>

    <div class="short-intro">
        <p>Australia’s mining industry is a global leader, contributes significantly to the economy
            and shaping future exploration. 
            This visualization highlights key trends from 2013 to 2022, 
            showcasing <a href="#dominance" style="text-decoration: underline;">Australia’s dominance</a>, 
            <a href="#state_map" style="text-decoration: underline;">state contributions</a>, 
            and the <a href="#minerals" style="text-decoration: underline;">minerals matter most</a>.
        </p>
    </div>
    <section>
        <h2 id="dominance">#1: Australia Leads the World in Mining Revenue</h2>
        <br><div class="content-row">
            <div id="top_country"></div>
            <p>Australia has maintained its long-standing position as <span style="color: white; font-size: 25px;">#1 in mining revenue</span>, consistently surpassing other major mining nations. 
            <br><br>This leadership shows Australia's dominance in the mining sector, 
            rooted in its <span style="color: white; font-size: 25px;">extensive mineral wealth</span> 
            and  <span style="color: white; font-size: 25px;">robust industry practices </span>.
            <br><br>As a pivotal player on the international stage, Australia continues to drive significant economic growth through its mining exports.</p>
        </div>
    </section>    

    <div id="align-right">
        <h2>#2: Mining Growth: Exports Fuel Australia’s Economy</h2>
    </div>
    <section id="exp-dms">
        <div class="content-row-2">
          <p> 
            Australia's mining sector has seen a big expansion, <span>fueled primarily by exports.</span>
            <br><span>Internal market:</span> There's consistent rise in domestic consumption, showing the solid domestic base 
                that supports the mining industry.
            <br><span>Export market:</span> The rising trend shows Australia's growing influence in the global mining market, 
                with a record high in 2022.
          </p>
          <div id="export-domestic"></div>
        </div>
      </section> 

    <section>
        <h2 style="font-size: 22px;">#3: State Contribution: Which One Drive Mining?</h2>
        <div class="content-row-3">
            <div>
                <div id="state_map"></div>
                <p>This map illustrates the contributions of states to the country's mining exploration activities.
                   <br> <span style="color: white; font-size: 25px;">WA</span> stands out as the <span style="color: white; font-size: 25px;">#1 contributor</span>, 
                   having the largest share to national exploration. 
                    <br> <span style="color: white; font-size: 25px;">QLD and SA</span> also make significant contributions, though on a smaller scale.
                </p>
                </div>
            <div class="state-div">
                <div id="state"></div>
                <p>This chart tracks mining exploration amounts in different Australian states across 2013, 2017, and 2022. 
                    <br><span style="color: white; font-size: 25px;">WA leads the growth</span>, showing a consistent increase in exploration funding. 
                    <br><span style="color: white; font-size: 25px;">QLD and NSW</span> also display <span style="color: white; font-size: 25px;">significant growth</span> over 10 years. </p>
            </div>
        </div>
        
        <div class="double-filter">
                <!-- Filter Dropdown -->
                <label for="regionFilter">Filter both chart:</label>
                <select id="regionFilter">
                    <option value="All">All</option>
                    <option value="NSW">NSW</option>
                    <option value="VIC">VIC</option>
                    <option value="QLD">QLD</option>
                    <option value="SA">SA</option>
                    <option value="WA">WA</option>
                    <option value="TAS">TAS</option>
                    <option value="Northern Territory">Northern Territory</option>
                </select>
            </div>
    </section>

    <section>
        <div id="align-right">
            <h2>#4: What Minerals Matter Most to Australia?</h2>
        </div>
        <div class="content-row-4">
            <p>This chart presents a snapshot of the minerals that hold the most significance to Australia mining. 
               <br><br><span style="color: white; font-size: 25px;">Petrol gas, coal, and iron </span> dominate as the <span style="color: white; font-size: 25px;">most valuable resources</span>, 
               representing a major portion of the country's mining output. 
                <br><br>The size of each circle emphasizes the economic importance of these minerals, 
                with <span style="color: white; font-size: 25px;">petrol gas, coal, and iron at the front</span> of driving Australia's mining economy.
            </p>
            <div id="mineral"></div>
        </div>
    </section>

    <div id="credit">
        <p> 
            The data used in this report is sourced from the <a href="https://data.worldbank.org/indicator/TX.VAL.MRCH.CD.WT" target="_blank">World Bank</a>, 
            the <a href="https://www.abs.gov.au/statistics/industry/mining/mineral-and-petroleum-exploration-australia/latest-release" target="_blank">Australian Bureau of Statistics (ABS)</a>, 
            <a href="https://oec.world/en/profile/country/aus" target="_blank">OEC World</a>,
            and <a href="https://www.ga.gov.au/digital-publication/aimr2019/value-of-australian-mineral-exports" target="_blank">Geoscience Australia</a>.
        </p>
    </div>

    <button onclick="topFunction()" id="myBtn" title="Go to top">↑</button>

    <script type="text/javascript">
        var spec1 = "js/symbol_map.vg.json";
        vegaEmbed('#style', spec1, {renderer: "svg", actions: false}).then(function (result) {
            // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
        }).catch(console.error);

        var spec6 = "js/top_country.vg.json";
        vegaEmbed('#top_country', spec6, { actions: false }).then(function (result) {
            // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
        }).catch(console.error);

        var spec7 = "js/export-domestic.vg.json";
        vegaEmbed('#export-domestic', spec7, { actions: false }).then(function (result) {
            // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
        }).catch(console.error);

        var spec9 = "js/mineral.vg.json";
        vegaEmbed('#mineral', spec9, { actions: false }).then(function (result) {
            // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
        }).catch(console.error);

    // Function to update both Vega charts
function updateVegaWithFilter(filterValue) {
    const specStateMap = "js/state_map.vg.json";
    const specState = "js/state.vg.json";

    // Load state map visualization and apply filter
    vegaEmbed('#state_map', specStateMap, { renderer: "svg", actions: false }).then(function(result) {
        result.view.signal("regionFilter", filterValue).run();
    }).catch(console.error);

    // Load state visualization and apply filter
    vegaEmbed('#state', specState, { renderer: "svg", actions: false }).then(function(result) {
        result.view.signal("regionFilter", filterValue).run();
    }).catch(console.error);
}

// Add event listener to dropdown
document.getElementById('regionFilter').addEventListener('change', function(event) {
    const selectedRegion = event.target.value;
    updateVegaWithFilter(selectedRegion);
});

// Initial load of both charts with 'All' selected by default
updateVegaWithFilter('All');

        // Get the button:
        let mybutton = document.getElementById("myBtn");

        // When the user scrolls down 20px from the top of the document, show the button
        window.onscroll = function() {scrollFunction()};

        function scrollFunction() {
        if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
            mybutton.style.display = "block";
        } else {
            mybutton.style.display = "none";
        }
        }

        // When the user clicks on the button, scroll to the top of the document
        function topFunction() {
        document.body.scrollTop = 0; // For Safari
        document.documentElement.scrollTop = 0; // For Chrome, Firefox, IE and Opera
        }
    
    </script>

</body>

</html>